{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}/Users/qitong/Library/CloudStorage/Dropbox/Projects/Implied Interest Rates/Estimation/Monetary_shocks/debug_log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}23 Jan 2023, 13:56:11
{txt}
{com}. /* This control determines whether the October 6, 1979 meeting is included. 
> This meeting is excluded in the baseline because the forecast is made on October 12
> and is based on responses to the policy change. See the discussion in the Greenbook forecast. 
> */
> local includeOct1979 = 0;
{txt}
{com}.  /* set to 1 to include */
> 
> /*************************************************************************************************************
> 
> 2. Dataset construction
> 
> *************************************************************************************************************/
> 
> 
> /*******************************************************************************
> 2a. Import original and extended Romer-Romer data
> *******************************************************************************/
> 
> import excel using "RRimport.xlsx", firstrow case(lower);
{res}{text}(33 vars, 360 obs)

{com}. /* meeting month and day for merge with forecast data */
> gen meeting_month = ym(year,month);
{txt}
{com}. qui gen day = floor((mtgdate-month*10000)/100);
{txt}
{com}. qui gen meeting_date = mdy(month,day,year);
{txt}
{com}. format meeting_date %td;
{txt}
{com}. /* at the beginning of the sample some months have two meetings. I reset the meeting
> variable here so I can use more robust 1:1 matches later. */
> duplicates tag meeting_month, gen(meetdup);

{p 0 4}{txt}Duplicates in terms of {res} meeting_month{p_end}
{txt}
{com}. replace meeting_month = meeting_month + 0.5*(day>20)*(meetdup==1);
{txt}(4 real changes made)

{com}. qui drop day meetdup;
{txt}
{com}. tempfile rrmonshock;
{txt}
{com}. save `rrmonshock', replace;
{txt}{p 0 4 2}
(file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000001{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000001{rm}
saved
as .dta format
{p_end}

{com}.         /*******************************************************************************
> 2b. Release dates for forecasts not in Fred and meeting dates for meetings not in Romer data
> *******************************************************************************/
> 
> /* these are forecast release dates matched to meeting days that are not
> contained in the FRED data. */
> import excel using "ForecastRelease.xlsx", firstrow case(lower) clear;
{res}{text}(8 vars, 137 obs)

{com}. /* meeting date */
> qui gen meeting_date = mdy(month,day,year);
{txt}
{com}. format meeting_date %td;
{txt}
{com}. /* release date */
> qui gen release_date = mdy(fc_month,fc_day,fc_year);
{txt}
{com}. format release_date %td;
{txt}
{com}. qui gen dist = meeting_date-release_date;
{txt}
{com}. tab dist;

       {txt}dist {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}          1        0.73        0.73
{txt}          1 {c |}{res}          3        2.19        2.92
{txt}          4 {c |}{res}          2        1.46        4.38
{txt}          5 {c |}{res}          3        2.19        6.57
{txt}          6 {c |}{res}        123       89.78       96.35
{txt}          7 {c |}{res}          3        2.19       98.54
{txt}          8 {c |}{res}          1        0.73       99.27
{txt}         13 {c |}{res}          1        0.73      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        137      100.00
{txt}
{com}. /* saving file for merge */
> qui keep meeting_date release_date mtgdate;
{txt}
{com}. tempfile additionalreleases;
{txt}
{com}. save `additionalreleases', replace;
{txt}{p 0 4 2}
(file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000002{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000002{rm}
saved
as .dta format
{p_end}

{com}.         /*******************************************************************************
> 2c. Compiling excel data from Philadelphia Fed
> https://www.philadelphiafed.org/research-and-data/real-time-center/greenbook-data/pdf-data-set
> *******************************************************************************/
> 
> /*
> The Philadelphia Fed has published excel files with Greenbook forecasts. These are
> imported here and cross-checked with the FRED data and the manually entered data in
> the Romer-Romer excel file.
> */
> 
> /* importing excel files and converting to Stata long form */
> local philvars `"unemp"' `"grgdp"'  `"gpgdp"'  `"gngdp"';
{txt}
{com}.  local philsheets `"_1967_1984"' `"_1985_last"';
{txt}
{com}. foreach variable in `"`philvars'"' {c -(};
{txt}  2{com}.                 local capvar = upper("`variable'");
{txt}  3{com}.                 foreach sheet in `"`philsheets'"' {c -(};
{txt}  4{com}.                                 import excel using "RRshock_xls/`capvar'`sheet'.xlsx", firstrow case(lower) clear;
{txt}  5{com}.                                 /* quarter for which forecast is made */
>                 qui gen fc_year = floor(date);
{txt}  6{com}.                 qui gen quarter = (date-fc_year)*10;
{txt}  7{com}.                                 // Something wrong with the yq function.
>                 qui gen fc_quarter = yq(fc_year,quarter);
{txt}  8{com}.                 list date fc_year quarter fc_quarter in 1/20;
{txt}  9{com}.                 format fc_quarter %tq;
{txt} 10{com}.                 list date fc_year quarter fc_quarter in 1/20;
{txt} 11{com}.                                 /*
>                 gen fake_month = quarter*3;
>                 gen fake_date = fc_year*10000 + fake_month*100 + 1;
>                 tostring fake_date, replace;
>                 gen date2 = date(fake_date, "YMD");
>                 format date2 %td;
>                 gen fc_quarter = qofd(date2);
>                 format fc_quarter %tq;
>                 */
>                 // list date fc_year quarter fc_quarter in 1/20;
>                 qui drop quarter date;
{txt} 12{com}. //              qui drop quarter date fake_date fake_month date2;
>                 
>                 /* reshape data */
>                 qui reshape long `variable', i(fc_quarter) j(release_date) string;
{txt} 13{com}.                 qui replace release_date = substr(release_date,2,.);
{txt} 14{com}.                 qui destring release_date, replace;
{txt} 15{com}.                                 /* saving */
>                 tempfile `capvar'`sheet';
{txt} 16{com}.                 save ``capvar'`sheet'';
{txt} 17{com}.         {c )-};
{txt} 18{com}. {c )-};
{res}{text}(203 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000003{rm}
saved
as .dta format
{p_end}
{res}{text}(217 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000004{rm}
saved
as .dta format
{p_end}
{res}{text}(203 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000005{rm}
saved
as .dta format
{p_end}
{res}{text}(217 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000006{rm}
saved
as .dta format
{p_end}
{res}{text}(203 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000007{rm}
saved
as .dta format
{p_end}
{res}{text}(217 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000008{rm}
saved
as .dta format
{p_end}
{res}{text}(203 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.000009{rm}
saved
as .dta format
{p_end}
{res}{text}(217 vars, 192 obs)

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1         24 {txt}{c |}
  2. {c |} {res}1966.2      1966         2         25 {txt}{c |}
  3. {c |} {res}1966.3      1966         3         26 {txt}{c |}
  4. {c |} {res}1966.4      1966         4         27 {txt}{c |}
  5. {c |} {res}1967.1      1967         1         28 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2         29 {txt}{c |}
  7. {c |} {res}1967.3      1967         3         30 {txt}{c |}
  8. {c |} {res}1967.4      1967         4         31 {txt}{c |}
  9. {c |} {res}1968.1      1968         1         32 {txt}{c |}
 10. {c |} {res}1968.2      1968         2         33 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3         34 {txt}{c |}
 12. {c |} {res}1968.4      1968         4         35 {txt}{c |}
 13. {c |} {res}1969.1      1969         1         36 {txt}{c |}
 14. {c |} {res}1969.2      1969         2         37 {txt}{c |}
 15. {c |} {res}1969.3      1969         3         38 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4         39 {txt}{c |}
 17. {c |} {res}1970.1      1970         1         40 {txt}{c |}
 18. {c |} {res}1970.2      1970         2         41 {txt}{c |}
 19. {c |} {res}1970.3      1970         3         42 {txt}{c |}
 20. {c |} {res}1970.4      1970         4         43 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}

     {c TLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c TRC}
     {c |} {res}  date   fc_year   quarter   fc_qua~r {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  1. {c |} {res}1966.1      1966         1     1966q1 {txt}{c |}
  2. {c |} {res}1966.2      1966         2     1966q2 {txt}{c |}
  3. {c |} {res}1966.3      1966         3     1966q3 {txt}{c |}
  4. {c |} {res}1966.4      1966         4     1966q4 {txt}{c |}
  5. {c |} {res}1967.1      1967         1     1967q1 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
  6. {c |} {res}1967.2      1967         2     1967q2 {txt}{c |}
  7. {c |} {res}1967.3      1967         3     1967q3 {txt}{c |}
  8. {c |} {res}1967.4      1967         4     1967q4 {txt}{c |}
  9. {c |} {res}1968.1      1968         1     1968q1 {txt}{c |}
 10. {c |} {res}1968.2      1968         2     1968q2 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 11. {c |} {res}1968.3      1968         3     1968q3 {txt}{c |}
 12. {c |} {res}1968.4      1968         4     1968q4 {txt}{c |}
 13. {c |} {res}1969.1      1969         1     1969q1 {txt}{c |}
 14. {c |} {res}1969.2      1969         2     1969q2 {txt}{c |}
 15. {c |} {res}1969.3      1969         3     1969q3 {txt}{c |}
     {c LT}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c RT}
 16. {c |} {res}1969.4      1969         4     1969q4 {txt}{c |}
 17. {c |} {res}1970.1      1970         1     1970q1 {txt}{c |}
 18. {c |} {res}1970.2      1970         2     1970q2 {txt}{c |}
 19. {c |} {res}1970.3      1970         3     1970q3 {txt}{c |}
 20. {c |} {res}1970.4      1970         4     1970q4 {txt}{c |}
     {c BLC}{hline 8}{c -}{hline 9}{c -}{hline 9}{c -}{hline 10}{c BRC}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.00000a{rm}
saved
as .dta format
{p_end}

{com}. /* combining datasets */
> foreach variable in `"`philvars'"' {c -(};
{txt}  2{com}.                 local capvar = upper("`variable'");
{txt}  3{com}.                 foreach sheet in `"`philsheets'"' {c -(};
{txt}  4{com}.                         if `"`variable'"'==`"unemp"' && `"`sheet'"'==`"_1967_1984"' {c -(};
{txt}  5{com}.                         use ``capvar'`sheet'', clear;
{txt}  6{com}.                 {c )-};
{txt}  7{com}.                 else if `"`variable'"'==`"unemp"' && `"`sheet'"'==`"_1985_last"' {c -(};
{txt}  8{com}.                         append using ``capvar'`sheet'';
{txt}  9{com}.                 {c )-};
{txt} 10{com}.                 else {c -(};
{txt} 11{com}.                         merge 1:1 fc_quarter release_date using ``capvar'`sheet'', nogenerate update;
{txt} 12{com}.                 {c )-};
{txt} 13{com}.                                 {c )-};
{txt} 14{com}.         {c )-};
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}          41,472
{txt}{col 9}from master{col 30}{res}          41,472{txt}  
{col 9}from using{col 30}{res}               0{txt}  

{col 5}Matched{col 30}{res}          38,784
{txt}{col 9}not updated{col 30}{res}          38,784{txt}  
{col 9}missing updated{col 30}{res}               0{txt}  
{col 9}nonmissing conflict{col 30}{res}               0{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}          38,784
{txt}{col 9}from master{col 30}{res}          38,784{txt}  
{col 9}from using{col 30}{res}               0{txt}  

{col 5}Matched{col 30}{res}          41,472
{txt}{col 9}not updated{col 30}{res}          38,948{txt}  
{col 9}missing updated{col 30}{res}           2,524{txt}  
{col 9}nonmissing conflict{col 30}{res}               0{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}          41,472
{txt}{col 9}from master{col 30}{res}          41,472{txt}  
{col 9}from using{col 30}{res}               0{txt}  

{col 5}Matched{col 30}{res}          38,784
{txt}{col 9}not updated{col 30}{res}          38,784{txt}  
{col 9}missing updated{col 30}{res}               0{txt}  
{col 9}nonmissing conflict{col 30}{res}               0{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}          38,784
{txt}{col 9}from master{col 30}{res}          38,784{txt}  
{col 9}from using{col 30}{res}               0{txt}  

{col 5}Matched{col 30}{res}          41,472
{txt}{col 9}not updated{col 30}{res}          38,957{txt}  
{col 9}missing updated{col 30}{res}           2,515{txt}  
{col 9}nonmissing conflict{col 30}{res}               0{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}          41,472
{txt}{col 9}from master{col 30}{res}          41,472{txt}  
{col 9}from using{col 30}{res}               0{txt}  

{col 5}Matched{col 30}{res}          38,784
{txt}{col 9}not updated{col 30}{res}          38,784{txt}  
{col 9}missing updated{col 30}{res}               0{txt}  
{col 9}nonmissing conflict{col 30}{res}               0{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}          38,784
{txt}{col 9}from master{col 30}{res}          38,784{txt}  
{col 9}from using{col 30}{res}               0{txt}  

{col 5}Matched{col 30}{res}          41,472
{txt}{col 9}not updated{col 30}{res}          38,948{txt}  
{col 9}missing updated{col 30}{res}           2,524{txt}  
{col 9}nonmissing conflict{col 30}{res}               0{txt}  
{col 5}{hline 41}

{com}.         /* incorrect relase date in Philadelphia data (double checked in original Greenbook) */
> replace release_date=19910626 if release_date==19910628;
{txt}(192 real changes made)

{com}. replace release_date=19940629 if release_date==19940630;
{txt}(192 real changes made)

{com}. /* cannot verify the existence of this forecast anywhere else. there is a
> Greenbook forecast from 1/30/1968 for the 2/6/1968 meeting. but neither the
> FOMC website nor the Philadelphia Fed website have a physical copy.*/
> drop if release_date==19680206;
{txt}(192 observations deleted)

{com}. /* assigning variable definitions based on Greenbooks */
> gen philgnp = grgdp if release_date<=19911030;
{txt}(77,820 missing values generated)

{com}. gen philgdp = grgdp if release_date>19911030;
{txt}(78,159 missing values generated)

{com}. gen philnomgnp = gngdp if release_date<=19911030;
{txt}(77,820 missing values generated)

{com}. gen philnomgdp = gngdp if release_date>19911030;
{txt}(78,159 missing values generated)

{com}. gen philgnpdefl = gpgdp if release_date<=19911030;
{txt}(77,826 missing values generated)

{com}. gen philgdpdefl = gpgdp if release_date>19911030 & release_date<=19960501;
{txt}(79,646 missing values generated)

{com}. gen philgdpchain = gpgdp if release_date>19960501;
{txt}(78,580 missing values generated)

{com}. qui rename unemp        philunemp;
{txt}
{com}. qui drop g?gdp;
{txt}
{com}. /* For the 1/29/1969 forecast the Greenbooks mention a supplement with additional
> forecasts to be forthcoming, but I cannot find a record of it. I augment the 
> data here with data from the Romer Greenbook file. If you find the record please
> let me know!
> */
> replace philgnp=1.4 if release_date==19690129 & fc_quarter==yq(1969,3);
{txt}(1 real change made)

{com}. replace philgnpdefl=4.2 if release_date==19690129 & fc_quarter==yq(1969,3);
{txt}(1 real change made)

{com}. /* Manual correction of incorrect entries in Philadelphia database. 
> I checked in the original Greenbooks that the Philadelphia data are incorrect. 
> */
> replace philgnp=0.1 if release_date==19691210 & fc_quarter==yq(1970,2);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.9 if release_date==19720913 & fc_quarter==yq(1973,1);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.4 if release_date==19720913 & fc_quarter==yq(1973,2);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.7 if release_date==19721011 & fc_quarter==yq(1973,1);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.5 if release_date==19721011 & fc_quarter==yq(1973,2);
{txt}(1 real change made)

{com}. replace philgnpdefl=4.1 if release_date==19721115 & fc_quarter==yq(1973,1);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.5 if release_date==19721115 & fc_quarter==yq(1973,2);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.7 if release_date==19760512 & fc_quarter==yq(1976,1);
{txt}(1 real change made)

{com}. replace philgnp=2.2 if release_date==19870701 & fc_quarter==yq(1987,2);
{txt}(1 real change made)

{com}. replace philnomgnp=8.6 if release_date==19820623 & fc_quarter==yq(1983,4);
{txt}(1 real change made)

{com}. replace philnomgnp=5.4 if release_date==19871209 & fc_quarter==yq(1987,4);
{txt}(1 real change made)

{com}. replace philnomgnp=5.1 if release_date==19871209 & fc_quarter==yq(1988,1);
{txt}(1 real change made)

{com}. replace philnomgnp=5.0 if release_date==19871209 & fc_quarter==yq(1988,2);
{txt}(1 real change made)

{com}. replace philnomgnp=6.3 if release_date==19871209 & fc_quarter==yq(1988,3);
{txt}(1 real change made)

{com}. replace philnomgnp=7.0 if release_date==19871209 & fc_quarter==yq(1988,4);
{txt}(1 real change made)

{com}. replace philnomgnp=7.6 if release_date==19910626 & fc_quarter==yq(1991,4);
{txt}(1 real change made)

{com}. replace philgdp=4.6 if release_date==19950322 & fc_quarter==yq(1994,4);
{txt}(1 real change made)

{com}. /* There is a revised forecast available for 4/6/1970 that is not in the Phildadelphia database. */
> replace release_date=19700406 if release_date==19700401 ;
{txt}(192 real changes made)

{com}. replace philgnp=3.1 if release_date==19700406 & fc_quarter==yq(1970,3);
{txt}(1 real change made)

{com}. replace philgnp=3.3 if release_date==19700406 & fc_quarter==yq(1970,4);
{txt}(1 real change made)

{com}. replace philnomgdp=6.7 if release_date==19700406 & fc_quarter==yq(1970,2);
{txt}(1 real change made)

{com}.         replace philnomgdp=5.9 if release_date==19700406 & fc_quarter==yq(1970,3);
{txt}(1 real change made)

{com}. replace philnomgdp=6.9 if release_date==19700406 & fc_quarter==yq(1970,4);
{txt}(1 real change made)

{com}. replace philgnpdefl=5.9 if release_date==19700406 & fc_quarter==yq(1970,2);
{txt}(1 real change made)

{com}. replace philgnpdefl=2.9 if release_date==19700406 & fc_quarter==yq(1970,3);
{txt}(1 real change made)

{com}. replace philgnpdefl=3.6 if release_date==19700406 & fc_quarter==yq(1970,4);
{txt}(0 real changes made)

{com}. replace philunemp=4.6 if release_date==19700406 & fc_quarter==yq(1970,3);
{txt}(1 real change made)

{com}. replace philunemp=4.8 if release_date==19700406 & fc_quarter==yq(1970,4);
{txt}(1 real change made)

{com}. /* There is a revised forecast available for 2/9/1971 that is not in the Phildadelphia database, but none of the variables I use have changed. */
> replace release_date=19710209 if release_date==19710203 ;
{txt}(192 real changes made)

{com}. /* The Philadelphia data quotes a release on 4/15/1977, but the Greenbooks date from 4/13/1977. 
> I could not find a written record of a forecast for 4/15/1977, so I use the original 4/13 values. 
> If you find documentation for this forecast please let me know! */
> replace release_date=19770413 if release_date==19770415 ;
{txt}(192 real changes made)

{com}. replace philgnp=7.2 if release_date==19770413 & fc_quarter==yq(1977,2);
{txt}(1 real change made)

{com}. replace philgnp=6.4 if release_date==19770413 & fc_quarter==yq(1977,3);
{txt}(1 real change made)

{com}.         /* check this */
> replace philgnp=5.9 if release_date==19770413 & fc_quarter==yq(1977,4);
{txt}(1 real change made)

{com}. replace philgnp=5.7 if release_date==19770413 & fc_quarter==yq(1978,1);
{txt}(1 real change made)

{com}. replace philgnp=5.6 if release_date==19770413 & fc_quarter==yq(1978,2);
{txt}(1 real change made)

{com}. replace philnomgdp=13.7 if release_date==19770413 & fc_quarter==yq(1977,2);
{txt}(1 real change made)

{com}. replace philnomgdp=12.4 if release_date==19770413 & fc_quarter==yq(1977,3);
{txt}(1 real change made)

{com}. replace philnomgdp=12.8 if release_date==19770413 & fc_quarter==yq(1977,4);
{txt}(1 real change made)

{com}. replace philnomgdp=11.7 if release_date==19770413 & fc_quarter==yq(1978,1);
{txt}(1 real change made)

{com}. replace philnomgdp=11.3 if release_date==19770413 & fc_quarter==yq(1978,2);
{txt}(1 real change made)

{com}. replace philgnpdefl=5.7 if release_date==19770413 & fc_quarter==yq(1977,3);
{txt}(1 real change made)

{com}. replace philgnpdefl=6.6 if release_date==19770413 & fc_quarter==yq(1977,4);
{txt}(1 real change made)

{com}. replace philgnpdefl=5.7 if release_date==19770413 & fc_quarter==yq(1978,1);
{txt}(1 real change made)

{com}. replace philgnpdefl=5.4 if release_date==19770413 & fc_quarter==yq(1978,2);
{txt}(0 real changes made)

{com}. replace philunemp=7.1 if release_date==19770413 & fc_quarter==yq(1977,2);
{txt}(1 real change made)

{com}. replace philunemp=7.0 if release_date==19770413 & fc_quarter==yq(1977,3);
{txt}(1 real change made)

{com}. replace philunemp=6.9 if release_date==19770413 & fc_quarter==yq(1977,4);
{txt}(1 real change made)

{com}. replace philunemp=6.7 if release_date==19770413 & fc_quarter==yq(1978,1);
{txt}(1 real change made)

{com}. replace philunemp=6.6 if release_date==19770413 & fc_quarter==yq(1978,2);
{txt}(1 real change made)

{com}. /* only match up to 2007 */
> qui drop if release_date>20080000;
{txt}
{com}.         tempfile philforecasts;
{txt}
{com}. save `philforecasts', replace;
{txt}{p 0 4 2}
(file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.00000b{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.00000b{rm}
saved
as .dta format
{p_end}

{com}.         /*******************************************************************************
> 2d. Compiling data from FRED
> https://alfred.stlouisfed.org/category?cid=32213
> *******************************************************************************/
> 
> /* The following two text files contain the Greenbook forecasts in the Fred database.
> The code creates the forecast horizon variable fc_quarter */
> import delimited "RRshock_txt/RRshock_Quarterly_1.txt", clear;
{res}{txt}(encoding automatically selected: UTF-8)
{text}(500 vars, 127 obs)

{com}. qui gen fc_year = substr(observation_date,1,4);
{txt}
{com}. qui gen fc_month = substr(observation_date,6,2);
{txt}
{com}. qui destring fc*, replace;
{txt}
{com}. qui gen fc_quarter = yq(fc_year,(fc_month+2)/3);
{txt}
{com}. qui format fc_quarter %tq;
{txt}
{com}. qui drop observation_date fc_year fc_month;
{txt}
{com}. qui order fc_quarter, first;
{txt}
{com}. tempfile rrshock_fred1;
{txt}
{com}. save `rrshock_fred1';
{txt}{p 0 4 2}
file {bf}
/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//S_82105.00000c{rm}
saved
as .dta format
{p_end}

{com}. import delimited "RRshock_txt/RRshock_Quarterly_2.txt", clear;
{res}{txt}(encoding automatically selected: ISO-8859-2)
{text}(499 vars, 126 obs)

{com}. qui gen fc_year = substr(observation_date,1,4);
{txt}
{com}. qui gen fc_month = substr(observation_date,6,2);
{txt}
{com}. qui destring fc*, replace;
{txt}
{com}. qui gen fc_quarter = yq(fc_year,(fc_month+2)/3);
{txt}
{com}. qui format fc_quarter %tq;
{txt}
{com}. qui drop observation_date fc_year fc_month;
{txt}
{com}. qui order fc_quarter, first;
{txt}
{com}. /* merging the two datasets */
> merge m:m fc_quarter using `rrshock_fred1', nogenerate;
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               7
{txt}{col 9}from master{col 30}{res}               3{txt}  
{col 9}from using{col 30}{res}               4{txt}  

{col 5}Matched{col 30}{res}             123{txt}  
{col 5}{hline 41}

{com}. /* variable list in Greenbook forecasts */
> local fcvars gdpc1gbfp gdpctpigbfp gdpdefgbfp gdpgbfp gnpcgbfp gnpdefgbfp gnpgbfp unrategbf;
{txt}
{com}. /* labels for variables */
> local gdpc1gbfp_label   "Real GDP";
{txt}
{com}. local gdpctpigbfp_label "GDP chained deflator";
{txt}
{com}. local gdpdefgbfp_label  "GDP deflator";
{txt}
{com}. local gdpgbfp_label     "Nominal GDP";
{txt}
{com}. local gnpcgbfp_label    "Real GNP";
{txt}
{com}. local gnpdefgbfp_label  "GNP deflator";
{txt}
{com}. local gnpgbfp_label     "Nominal GNP";
{txt}
{com}. local unrategbf_label   "Unemployment";
{txt}
{com}. /* reshape to long format. release_date is the date when the forecast is made. fc_quarter describes for which quarter the forecast is made */
> qui reshape long `fcvars', i(fc_quarter) j(release_date) string;
{err}{hline 2}Break{hline 2}
{txt}{search r(1), local:r(1);}

end of do-file

{err}{hline 2}Break{hline 2}
{txt}{search r(1), local:r(1);}

{com}. clear

. do "/var/folders/m3/3t75j_710dd65kprbd3qy1z40000gn/T//SD82105.000000"
{txt}
{com}. 
. 
. clear
{txt}
{com}. 
. import delimited using "/Users/qitong/Library/CloudStorage/Dropbox/Projects/Implied Interest Rates/Estimation/Input/Instruments.csv", varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-2)
{text}(11 vars, 576 obs)

{com}. 
{txt}end of do-file

{com}. 